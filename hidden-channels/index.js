(function(r,o,a,f,C,R){"use strict";const{View:E,Text:g,Pressable:T}=o.findByProps("Button","Text","View"),y=o.findByProps("extractTimestamp"),d=a.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:a.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:C.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:C.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function h(e){let{date:n}=e;return React.createElement(T,{style:d.dateContainer,onPress:function(){a.toasts.open({content:a.moment(n).toLocaleString(),source:R.getAssetByName("clock").id})},onLongPress:function(){a.clipboard.setString(n.getTime().toString()),a.toasts.open({content:"Copied to clipboard"})}},React.createElement(g,{style:d.text},a.moment(n).fromNow()))}function M(e){let{channel:n}=e;return React.createElement(E,{style:d.container},React.createElement(g,{style:d.title},"This channel is hidden."),React.createElement(g,{style:d.text},"Topic: ",n.topic||"No topic.",`

`,"Creation date: ",React.createElement(h,{date:new Date(y.extractTimestamp(n.id))}),`

`,"Last message: ",n.lastMessageId?React.createElement(h,{date:new Date(y.extractTimestamp(n.lastMessageId))}):"No messages.",`

`,"Last pin: ",n.lastPinTimestamp?React.createElement(h,{date:new Date(n.lastPinTimestamp)}):"No pins."))}let i=[];const D=o.findByProps("getChannelPermissions","can"),b=o.findByProps("transitionToGuild"),m=o.findByProps("stores","fetchMessages"),{ChannelTypes:p}=o.findByProps("ChannelTypes"),{getChannel:H}=o.findByProps("getChannel"),B=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function u(e){if(e==null||(typeof e=="string"&&(e=H(e)),!e||B.includes(e.type)))return!1;e.realCheck=!0;const n=!D.can(a.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,n}function P(){console.log("[Hidden Channels Debug] onLoad started");const e=o.findByName("MessagesWrapperConnected",!1);console.log(e?"[Hidden Channels Debug] MessagesWrapperConnected found":"[Hidden Channels Debug] MessagesWrapperConnected not found");const n=o.findByName("ChannelMessages",!1)||o.findByProps("ChannelMessages");if(n){console.log("[Hidden Channels Debug] ChannelMessages found");const t=n?.default?._channelMessages;if(t){const s=Object.keys(t);console.log("[Hidden Channels Debug] Channel IDs found:",s);for(const l of s){const c=t[l];u(c)&&(console.log("[Hidden Channels Debug] Hidden channel found:",l),a.React.createElement(M,{channel:c}))}}else console.log("[Hidden Channels Debug] _channelMessages not found in ChannelMessages")}else console.log("[Hidden Channels Debug] ChannelMessages not found");i.push(f.after("can",D,function(t,s){let[l,c]=t;return!c?.realCheck&&l===a.constants.Permissions.VIEW_CHANNEL?!0:s})),i.push(f.instead("transitionToGuild",b,function(t,s){const[l,c]=t;!u(c)&&typeof s=="function"&&s(t)})),i.push(f.instead("fetchMessages",m,function(t,s){const[l]=t;!u(l)&&typeof s=="function"&&s(t)})),i.push(f.instead("default",e,function(t,s){const l=t[0]?.channel;return!u(l)&&typeof s=="function"?s(...t):a.React.createElement(M,{channel:l})}))}var x={onLoad:P,onUnload:function(){console.log("[Hidden Channels Debug] onUnload called.");for(const e of i)e();i=[]}};return r.default=x,r.onLoad=P,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
