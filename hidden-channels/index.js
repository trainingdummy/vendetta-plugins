(function(l,a,n,r,y,P){"use strict";const{View:C,Text:d,Pressable:R}=a.findByProps("Button","Text","View"),h=a.findByProps("extractTimestamp"),c=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:y.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:y.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function f(t){let{date:e}=t;return React.createElement(R,{style:c.dateContainer,onPress:function(){n.toasts.open({content:n.moment(e).toLocaleString(),source:P.getAssetByName("clock").id})},onLongPress:function(){n.clipboard.setString(e.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},React.createElement(d,{style:c.text},n.moment(e).fromNow()))}function T(t){let{channel:e}=t;return React.createElement(C,{style:c.container},React.createElement(d,{style:c.title},"This channel is hidden."),React.createElement(d,{style:c.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(f,{date:new Date(h.extractTimestamp(e.id))}),`

`,"Last message: ",e.lastMessageId?React.createElement(f,{date:new Date(h.extractTimestamp(e.lastMessageId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(f,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let o=[];const E=a.findByProps("getChannelPermissions","can"),m=a.findByProps("transitionToGuild"),M=a.findByProps("stores","fetchMessages"),x=a.findByProps("ChannelTypes"),{ChannelTypes:u}=x||{ChannelTypes:{}},A=a.findByProps("getChannel"),{getChannel:B}=A||{getChannel:function(t){return null}},p=new WeakMap,D=[u.DM,u.GROUP_DM,u.GUILD_CATEGORY];function g(t){if(!t||(typeof t=="string"&&(t=B(t)),!t||D.includes(t.type)))return!1;p.set(t,!0);const e=E.can(n.constants.Permissions.VIEW_CHANNEL,t);return p.delete(t),!e}function I(){const t=a.findByName("MessagesWrapperConnected",!1);if(!t){console.error("Hidden Channels plugin: 'MessagesWrapperConnected' component not found");return}o.push(r.after("can",E,function(e,s){let[i,S]=e;return p.get(S)&&i===n.constants.Permissions.VIEW_CHANNEL?!0:s})),o.push(r.instead("transitionToGuild",m,function(e,s){const[,i]=e;!g(i)&&typeof s=="function"&&s(e)})),o.push(r.instead("fetchMessages",M,function(e,s){const[i]=e;!g(i)&&typeof s=="function"&&s(e)})),o.push(r.instead("default",t,function(e,s){const i=e[0]?.channel;return!g(i)&&typeof s=="function"?s(...e):n.React.createElement(T,{channel:i})}))}function N(){o.forEach(function(t){return t()}),o=[]}var L={onLoad:I,onUnload:N};return l.default=L,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
