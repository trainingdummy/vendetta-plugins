(function(r,o,a,u,C,R){"use strict";const{View:E,Text:g,Pressable:b}=o.findByProps("Button","Text","View"),y=o.findByProps("extractTimestamp"),d=a.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:a.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:C.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:C.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function h(e){let{date:n}=e;return React.createElement(b,{style:d.dateContainer,onPress:function(){a.toasts.open({content:a.moment(n).toLocaleString(),source:R.getAssetByName("clock").id})},onLongPress:function(){a.clipboard.setString(n.getTime().toString()),a.toasts.open({content:"Copied to clipboard"})}},React.createElement(g,{style:d.text},a.moment(n).fromNow()))}function P(e){let{channel:n}=e;return React.createElement(E,{style:d.container},React.createElement(g,{style:d.title},"This channel is hidden."),React.createElement(g,{style:d.text},"Topic: ",n.topic||"No topic.",`

`,"Creation date: ",React.createElement(h,{date:new Date(y.extractTimestamp(n.id))}),`

`,"Last message: ",n.lastMessageId?React.createElement(h,{date:new Date(y.extractTimestamp(n.lastMessageId))}):"No messages.",`

`,"Last pin: ",n.lastPinTimestamp?React.createElement(h,{date:new Date(n.lastPinTimestamp)}):"No pins."))}let l=[];const D=o.findByProps("getChannelPermissions","can"),H=o.findByProps("transitionToGuild"),T=o.findByProps("stores","fetchMessages"),{ChannelTypes:p}=o.findByProps("ChannelTypes"),{getChannel:m}=o.findByProps("getChannel"),B=[p.DM,p.GROUP_DM,p.GUILD_CATEGORY];function f(e){if(!e||(typeof e=="string"&&(e=m(e)),!e||B.includes(e.type)))return!1;e.realCheck=!0;const n=!D.can(a.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,n}function M(){console.log("[Hidden Channels Debug] Plugin loading...");const e=o.findByName("MessagesWrapperConnected",!1);if(!e){console.error("[Hidden Channels Debug] MessagesWrapperConnected not found!");return}console.log("[Hidden Channels Debug] MessagesWrapperConnected found");const n=o.findByName("ChannelMessages",!1)||o.findByProps("ChannelMessages");if(n){console.log("[Hidden Channels Debug] ChannelMessages found");const t=n?.default?._channelMessages;if(t){const s=Object.keys(t);console.log("[Hidden Channels Debug] Found channel IDs:",s);for(const i of s){const c=t[i];f(c)&&(console.log("[Hidden Channels Debug] Hidden channel found:",i),a.React.createElement(P,{channel:c}))}}else console.log("[Hidden Channels Debug] _channelMessages not found in ChannelMessages")}else console.log("[Hidden Channels Debug] ChannelMessages not found");l.push(u.after("can",D,function(t,s){let[i,c]=t;return!c?.realCheck&&i===a.constants.Permissions.VIEW_CHANNEL?!0:s})),l.push(u.instead("transitionToGuild",H,function(t,s){const[i,c]=t;!f(c)&&typeof s=="function"&&s(t)})),l.push(u.instead("fetchMessages",T,function(t,s){const[i]=t;!f(i)&&typeof s=="function"&&s(t)})),l.push(u.instead("default",e,function(t,s){const i=t[0]?.channel;return!f(i)&&typeof s=="function"?s(...t):a.React.createElement(P,{channel:i})})),console.log("[Hidden Channels Debug] Plugin loaded successfully.")}var x={onLoad:M,onUnload:function(){console.log("[Hidden Channels Debug] Plugin unloading...");for(const e of l)e();l=[]}};return r.default=x,r.onLoad=M,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
