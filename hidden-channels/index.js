(function(d,a,s,l,C,E){"use strict";const{View:P,Text:f,Pressable:R}=a.findByProps("Button","Text","View"),y=a.findByProps("extractTimestamp"),c=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:C.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:C.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function u(e){let{date:n}=e;return React.createElement(R,{style:c.dateContainer,onPress:function(){s.toasts.open({content:s.moment(n).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(n.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(f,{style:c.text},s.moment(n).fromNow()))}function p(e){let{channel:n}=e;return React.createElement(P,{style:c.container},React.createElement(f,{style:c.title},"This channel is hidden."),React.createElement(f,{style:c.text},"Topic: ",n.topic||"No topic.",`

`,"Creation date: ",React.createElement(u,{date:new Date(y.extractTimestamp(n.id))}),`

`,"Last message: ",n.lastMessageId?React.createElement(u,{date:new Date(y.extractTimestamp(n.lastMessageId))}):"No messages.",`

`,"Last pin: ",n.lastPinTimestamp?React.createElement(u,{date:new Date(n.lastPinTimestamp)}):"No pins."))}const M=["MessagesWrapperConnected","ChannelMessages","ChannelReader","GuildBasicChannels","MessageActionCreators","MessagePreviewStore","ChannelStore"];let g=null;for(const e of M){const n=a.findByName(e,!1);if(n){console.log(`Found candidate component: ${e}`),console.log("Candidate prototype:",n.prototype),g=n;break}else console.log(`Candidate component ${e} not found.`)}g?i.push(l.instead("default",g,function(e,n){const t=e[0]?.channel;return t&&t.name&&t.name.toLowerCase().includes("serious")?(console.log("Forcing HiddenChannel UI for channel:",t.name),s.React.createElement(p,{channel:t})):!r(t)&&typeof n=="function"?n(...e):s.React.createElement(p,{channel:t})})):console.error("Hidden Channels plugin: No suitable messages component found!");let i=[];const m=a.findByProps("getChannelPermissions","can"),T=a.findByProps("transitionToGuild"),x=a.findByProps("stores","fetchMessages"),B=a.findByProps("ChannelTypes"),{ChannelTypes:h}=B||{ChannelTypes:{}},N=a.findByProps("getChannel"),{getChannel:w}=N||{getChannel:function(e){return null}},A=new WeakMap,L=[h.DM,h.GROUP_DM,h.GUILD_CATEGORY];function r(e){if(!e||(typeof e=="string"&&(e=w(e)),!e||L.includes(e.type)))return!1;if(console.log("isHidden: checking channel",e.id,e.name,e.type),e.name&&e.name.toLowerCase().includes("serious"))return console.log("isHidden: forcing hidden for channel with name",e.name),!0;e.realCheck=!0;let n=!m.can(s.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,console.log("isHidden: result from Permissions.can for channel",e.id,":",n),n}function H(){const e=a.findByName("MessagesWrapperConnected",!1);if(!e){console.error("Hidden Channels plugin: 'MessagesWrapperConnected' component not found");return}i.push(l.after("can",m,function(n,t){let[o,D]=n;return A.get(D)&&o===s.constants.Permissions.VIEW_CHANNEL?!0:t})),i.push(l.instead("transitionToGuild",T,function(n,t){const[,o]=n;!r(o)&&typeof t=="function"&&t(n)})),i.push(l.instead("fetchMessages",x,function(n,t){const[o]=n;!r(o)&&typeof t=="function"&&t(n)})),i.push(l.instead("default",e,function(n,t){const o=n[0]?.channel;return!r(o)&&typeof t=="function"?t(...n):s.React.createElement(p,{channel:o})}))}function I(){i.forEach(function(e){return e()}),i=[]}var S={onLoad:H,onUnload:I};return d.default=S,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
