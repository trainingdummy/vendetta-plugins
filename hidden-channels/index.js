(function(l,a,n,r,g,m){"use strict";const{View:C,Text:d,Pressable:P}=a.findByProps("Button","Text","View"),h=a.findByProps("extractTimestamp"),c=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:g.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:g.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function f(e){let{date:t}=e;return React.createElement(P,{style:c.dateContainer,onPress:function(){n.toasts.open({content:n.moment(t).toLocaleString(),source:m.getAssetByName("clock").id})},onLongPress:function(){n.clipboard.setString(t.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},React.createElement(d,{style:c.text},n.moment(t).fromNow()))}function E(e){let{channel:t}=e;return React.createElement(C,{style:c.container},React.createElement(d,{style:c.title},"This channel is hidden."),React.createElement(d,{style:c.text},"Topic: ",t.topic||"No topic.",`

`,"Creation date: ",React.createElement(f,{date:new Date(h.extractTimestamp(t.id))}),`

`,"Last message: ",t.lastMessageId?React.createElement(f,{date:new Date(h.extractTimestamp(t.lastMessageId))}):"No messages.",`

`,"Last pin: ",t.lastPinTimestamp?React.createElement(f,{date:new Date(t.lastPinTimestamp)}):"No pins."))}let o=[];const y=a.findByProps("getChannelPermissions","can"),R=a.findByProps("transitionToGuild"),T=a.findByProps("stores","fetchMessages"),M=a.findByProps("ChannelTypes"),{ChannelTypes:u}=M||{ChannelTypes:{}},x=a.findByProps("getChannel"),{getChannel:A}=x||{getChannel:function(e){return null}},B=new WeakMap,w=[u.DM,u.GROUP_DM,u.GUILD_CATEGORY];function p(e){if(!e||(typeof e=="string"&&(e=A(e)),!e||w.includes(e.type)))return!1;if(console.log("isHidden: checking channel",e.id,e.name,e.type),e.name&&e.name.toLowerCase().includes("serious"))return console.log("isHidden: forcing hidden for channel with name",e.name),!0;e.realCheck=!0;let t=!y.can(n.constants.Permissions.VIEW_CHANNEL,e);return delete e.realCheck,console.log("isHidden: result from Permissions.can for channel",e.id,":",t),t}function D(){const e=a.findByName("MessagesWrapperConnected",!1);if(!e){console.error("Hidden Channels plugin: 'MessagesWrapperConnected' component not found");return}o.push(r.after("can",y,function(t,s){let[i,N]=t;return B.get(N)&&i===n.constants.Permissions.VIEW_CHANNEL?!0:s})),o.push(r.instead("transitionToGuild",R,function(t,s){const[,i]=t;!p(i)&&typeof s=="function"&&s(t)})),o.push(r.instead("fetchMessages",T,function(t,s){const[i]=t;!p(i)&&typeof s=="function"&&s(t)})),o.push(r.instead("default",e,function(t,s){const i=t[0]?.channel;return!p(i)&&typeof s=="function"?s(...t):n.React.createElement(E,{channel:i})}))}function I(){o.forEach(function(e){return e()}),o=[]}var L={onLoad:D,onUnload:I};return l.default=L,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
