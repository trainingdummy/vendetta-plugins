(function(d,o,s,r,p,E){"use strict";const{View:M,Text:u,Pressable:D}=o.findByProps("Button","Text","View"),C=o.findByProps("extractTimestamp"),c=s.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:s.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:p.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:p.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function g(n){let{date:e}=n;return React.createElement(D,{style:c.dateContainer,onPress:function(){s.toasts.open({content:s.moment(e).toLocaleString(),source:E.getAssetByName("clock").id})},onLongPress:function(){s.clipboard.setString(e.getTime().toString()),s.toasts.open({content:"Copied to clipboard"})}},React.createElement(u,{style:c.text},s.moment(e).fromNow()))}function y(n){let{channel:e}=n;return React.createElement(M,{style:c.container},React.createElement(u,{style:c.title},"This channel is hidden."),React.createElement(u,{style:c.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",React.createElement(g,{date:new Date(C.extractTimestamp(e.id))}),`

`,"Last message: ",e.lastMessageId?React.createElement(g,{date:new Date(C.extractTimestamp(e.lastMessageId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?React.createElement(g,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let l=[];const P=o.findByProps("getChannelPermissions","can"),T=o.findByProps("transitionToGuild"),m=o.findByProps("stores","fetchMessages"),{ChannelTypes:h}=o.findByProps("ChannelTypes"),{getChannel:b}=o.findByProps("getChannel"),x=[h.DM,h.GROUP_DM,h.GUILD_CATEGORY];function f(n){if(n==null||(typeof n=="string"&&(n=b(n)),!n||x.includes(n.type)))return!1;n.realCheck=!0;const e=!P.can(s.constants.Permissions.VIEW_CHANNEL,n);return delete n.realCheck,e}function R(){console.log("[Hidden Channels Debug] onLoad started");const n=o.findByName("ChannelMessages",!1)||o.findByProps("ChannelMessages");if(n){console.log("[Hidden Channels Debug] ChannelMessages found");const e=n?.default?._channelMessages;if(e){const t=Object.keys(e);console.log("[Hidden Channels Debug] Channel IDs found:",t);for(const a of t){const i=e[a];f(i)&&(console.log("[Hidden Channels Debug] Hidden channel found:",a),s.React.createElement(y,{channel:i}))}}else console.log("[Hidden Channels Debug] _channelMessages not found in ChannelMessages")}else console.log("[Hidden Channels Debug] ChannelMessages not found");l.push(r.after("can",P,function(e,t){let[a,i]=e;return!i?.realCheck&&a===s.constants.Permissions.VIEW_CHANNEL?!0:t})),l.push(r.instead("transitionToGuild",T,function(e,t){const[a,i]=e;!f(i)&&typeof t=="function"&&t(e)})),l.push(r.instead("fetchMessages",m,function(e,t){const[a]=e;!f(a)&&typeof t=="function"&&t(e)})),l.push(r.instead("default",MessagesConnected,function(e,t){const a=e[0]?.channel;return!f(a)&&typeof t=="function"?t(...e):s.React.createElement(y,{channel:a})}))}var B={onLoad:R,onUnload:function(){console.log("[Hidden Channels Debug] onUnload called.");for(const n of l)n();l=[]}};return d.default=B,d.onLoad=R,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets);
